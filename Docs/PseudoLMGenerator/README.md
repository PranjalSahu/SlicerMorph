## PseudoLMGenerator
**Summary:** This module uses a 3D modelâ€™s geometry or a geometric approximation or to create a dense template of pseudo-landmarks. The landmark placement is constrained to the external surface of the mesh. Points sampled on the template are projected to the mesh surface along the surface normals of the template and then filtered to remove those within the sample spacing distance, improving regularity of sampling. Optionally, the pseudo-landmarks can be made into a symmetric set. This module can be used to generate a large number of points on a 3D model that can serve as a landmark template that can be transferred to other samples in the dataset.

### USAGE

#### Input Parameters
* __Base mesh:__ Specifies the model where the pseudo-landmarks will be placed.

* __Spacing tolerance:__ Specifies the minimum distance allowed between pseudo-landmarks, as a percentage of the image length. This value will determine the number of pseudo-landmarks.

#### Template geometry
The parameters in this section allow the user to select and adjust the regularly sampled template that is used to approximate the input model. The geometric shapes (sphere or ellipse) are useful when the base model has geometry similar to that shape and the mesh is noisy or has irregular cell sizes. The original geometry option is the most robust to the model's shape and is the default setting.

* __Original geometry:__ When this option is selected, the approximate template will be generated by subsampling the model to satisfy the spacing tolerance constraint.

* __Ellipse:__ When this option is selected, the approximate template will be generated by an ellipse with radii set by the model dimensions and subsampled to satisfy the spacing tolerance constraint.

* __Sphere:__ When this option is selected, the approximate template will be generated by an sphere with radius set by the model length and subsampled to satisfy the spacing tolerance constraint.

* __Symmetry plane:__ This option allows the users to select a plane of symmetry from the scene and will use this plane to create a symmetric pseudo-landmark set. If this option is selected, the pseudo-landmarks will be generated using a symmetric template. In the final processing step, the landmark set will be cropped by the symmetry plane, mirrored across the midline, and projected back onto the model surface along estimated surface normals. The final pseudo-landmark set will contain landmark names indicating side of the symmetry plane it is from (normal or inverse) or whether it is a midline point.

* __Template scale factor:__ When a geometric shape is used as an approximate template, this option allows the user to adjust the default radius scaling factor set from the image size.

* __Maximum projection factor:__ This value specifies the maximum distance that a point can be projected from a template to the model surface. If there are multiple external surfaces in an image, decreasing the maximum projection vector can help constrain projected points to the nearest external surface.

#### PseudoLMGenerator WORKFLOW
* __Get subsample number__: This step calculates the initial number of points that will be generated for the model, dictated by the spacing tolerance constraint. The point number is displayed in the `Sampling information window`. This step can be run repeatedly until the target number of points is achieved. Since these points are generated on internal and external surfaces and many will be removed by the spatial filter in the final step, the initial number should be up to two times the target number of points in the finalized pseudo-landmark set.
* __Generate template__: This step visulizes the sampled template to confirm that it is a reasonable appromimation of the model.

* __Project points to surface__: This step projects each point from the sampled template to the surface of the model.

* __Enforce spatial sampling rate__: The final step applies a spatial filter that removes points that do not meet the spacing tolerance constraint. If a plane of symmetry is specified, the symmetry constraint will be applied to the pseudo-landmark set as a final post-processing step.

#### PseudoLMGenerator OUTPUT
* The directory of pseudo-landmarks generated by this module can be transferred across samples in a dataset using the `ProjectSemiLM` module if anatomical landmarks exist for all samples, or the `ALPACA` module, which does not require anatomical landmarks.

* Pseudo-landmarks placed on samples independently using this module should not be compared, as the positions are random.

### TUTORIAL
For more detail, please see the [PseudoLMGenerator tutorial](https://github.com/SlicerMorph/Tutorials/tree/main/PseudoLMGenerator).

[Video tutorial for PseudoLMGenerator and MarkupEditor](https://www.youtube.com/watch?v=yvI65oyxYpA)




